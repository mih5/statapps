<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Correlation Game</title>
		<link type="text/css" rel="stylesheet" href="correlation_game.css" />
        <script type="text/javascript" src="d3/d3.v3.js"></script>
		<script type="text/javascript" src="utility.js"></script>
    </head>
    <body>
        <script>
		
		variance = function(u)
{
    var n=u.length,alpha = (n/(n-1));
    var r =  (d3.mean(u.map(function(v) { return v*v;})) - Math.pow(d3.mean(u),2));
    return alpha*r;
}

//standard deviation - corrected population
function sd(x, f) {
	var n = x.length;
	if (n < 1) return NaN;
	if (n === 1) return 0;
	
	var meanX = mean(x, f);
	
	var sumOfSquares = 0;
	
	for (var i = 0; i < n; i++){
		var value = f.call(x, x[i], i);
		sumOfSquares = sumOfSquares + Math.pow((value - meanX), 2);
	}
	
	return Math.sqrt(sumOfSquares / (n-1));
	
}

//mean
function mean(x, f){

	var n = x.length;

	var sum = 0;
	
	for (var i = 0; i < n; i++){
		sum = sum + f.call(x, x[i], i);
	}
	
	return sum / n;
}

		var data = [{ x: 0.10975447600181648, y: 0.3156950116529865, color:"red"}, 
		{ x: -1.1171684357982106, y:-0.8311743165059712, color:"red"}, 
		{ x:0.35146252646762566, y:0.35477743567424513, color:"red"}, 
		{ x:0.4877928151253832, y:2.089462624426971, color:"red"}, 
		{ x:-0.5040325369481905, y:-0.7688987745739768, color:"red"}];
		x=[0.10975447600181648,-1.1171684357982106,0.35146252646762566,0.4877928151253832,-0.5040325369481905]
			
		var sdX = sd(data, function(d) {return d.x;} );
		var sdXCorrect = Math.sqrt(variance(x));
		
		var correlation = cor(data, function(d) {return d.x;}, function(d) {return d.y;})
		
		function rnorm(num_samples, mean, sd) {
			var func = d3.random.normal();
			var samples = [];
			for (var i = 0; i < num_samples; i++ ){
				samples[i]=func();
			}
			return samples;
		}
		
		var sample = rnorm(5);
		
		function check(sample){
			var n = sample.length;
			var indicator = 0;
			for (i = 0; i< 5; i++){
				if(sample[i] < 0){
					indicator ++;
				};
			}
			if(indicator === 5){
				return 1;
			}
			else{
				return 0;
			}
		}
		
		var count=0;
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		count = count + check(rnorm(5));
		
		console.log(count);
		
		
		</script>
	
    </body>
</html>     